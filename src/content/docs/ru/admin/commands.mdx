---
title: Команды администратора
description: Доступные команды для администраторов бота
---

## Справочник команд администратора

### /sync

Синхронизируйте пользователей из панели Remnawave с БД.

**Что делает:**
- Загружает всех пользователей с панели Remnawave
- Обновляет существующих пользователей в БД
- Удаляет пользователей, которых больше нет в Remnawave
- Обеспечивает согласованность БД

**Использование:**
```
Отправьте команду /sync боту как администратор
```

**Требует:**
- Пользовательский ID в `ADMIN_TELEGRAM_ID`
- Действительные учётные данные API Remnawave
- Подключение к БД

**Когда использовать:**
- После массовых изменений пользователей в Remnawave
- Для исправления несоответствий БД
- Как часть режима обслуживания
- До/после миграций

**Пример сценария:**
```
Администратор вносит изменения в панель Remnawave
→ Администратор выполняет команду /sync
→ Бот загружает обновленный список пользователей
→ БД синхронизирована
→ Всё согласовано
```

## Будущие команды

Следующие команды могут быть добавлены:

- `/stats` - Просмотр статистики
- `/broadcast` - Отправить сообщение всем пользователям
- `/suspend <id>` - Приостановить пользователя
- `/ban <id>` - Забанить пользователя
- `/refund <id>` - Обработать возврат
- `/export` - Экспортировать данные пользователей

## Управление доступом пользователей

Только пользователи с ID в `ADMIN_TELEGRAM_ID` могут выполнять команды администратора.

Чтобы установить ваш ID администратора:

```env
ADMIN_TELEGRAM_ID=123456789
```

Найдите ваш Telegram ID:
- Отправьте любое сообщение [@userinfobot](https://t.me/userinfobot)
- Запишите возвращённый ID
- Добавьте в конфигурацию

## Разрешения команд

| Команда | Требуемое разрешение |
|---------|------------------|
| `/start` | Любой пользователь |
| `/help` | Любой пользователь |
| `/sync` | Только администратор |

## Лучшие практики

1. **Выполняйте /sync регулярно** - Ежедневное или еженедельное обслуживание
2. **Проверяйте логи** - Подтвердите успешное выполнение
3. **Мониторьте производительность** - Крупные операции синхронизации могут занять время
4. **Создайте резервную копию БД** - Перед крупными операциями
5. **Документируйте изменения** - Ведите журнал действий администратора

## Устранение неполадок

### /sync не работает

**Проверьте:**
- `ADMIN_TELEGRAM_ID` соответствует вашему ID
- API Remnawave доступен
- Учётные данные API действительны
- Подключение к БД активно

**Исправьте:**
```bash
# Просмотрите логи
docker compose logs remnawave-telegram-shop-bot

# Проверьте БД
docker compose logs postgres

# Перезагрузитесь при необходимости
docker compose restart remnawave-telegram-shop-bot
```

### Доступ запрещён

- Проверьте ваш Telegram ID
- Подтвердите, что он в `ADMIN_TELEGRAM_ID`
- Перезагрузите бота: `docker compose down && docker compose up -d`

### Синхронизация медленная

- Большие базы пользователей требуют времени
- Проверьте производительность БД
- Контролируйте ресурсы сервера
- Выполняйте в часы низкой нагрузки

## Соображения безопасности

✅ Команды администратора безопасны  
✅ Только авторизованные пользователи могут выполнять  
✅ Все действия регистрируются  
✅ Операции атомарны  

❌ Никогда не делитесь ID администратора  
❌ Не транслируйте чувствительную информацию
