---
title: Настройка YooKassa
description: Настройте YooKassa для платежей банковской картой
---

import { Steps } from '@astrojs/starlight/components';

YooKassa (Яндекс.Касса) - это платежный процессор, поддерживающий банковские карты и другие методы в России и странах СНГ.

## Требования

- Регистрация бизнеса
- Торговый аккаунт YooKassa
- API учетные данные

## Инструкции по настройке

<Steps>

1. **Создайте аккаунт YooKassa**
   - Посетите [yookassa.ru](https://yookassa.ru)
   - Зарегистрируйтесь как торговец
   - Подтвердите информацию о бизнесе
   - Дождитесь одобрения

2. **Сгенерируйте API учетные данные**
   - Войдите в панель управления
   - Перейдите в параметры API
   - Создайте ключ API
   - Запишите ваш ID магазина

3. **Настройте переменные окружения**
   ```bash
   YOOKASA_ENABLED=true
   YOOKASA_SHOP_ID=123456
   YOOKASA_SECRET_KEY=ваш_секретный_ключ
   YOOKASA_EMAIL=contact@example.com
   YOOKASA_URL=https://payment.yandex.net
   ```

4. **Перезагрузите бота**
   ```bash
   docker compose down && docker compose up -d
   ```

5. **Протестируйте платеж**
   - Отправьте `/start` боту
   - Выберите подписку
   - Выберите платеж YooKassa
   - Используйте тестовую карту: `4111 1111 1111 1111`

</Steps>

## Переменные конфигурации

| Переменная | Описание |
|----------|-------------|
| `YOOKASA_ENABLED` | Включить/отключить YooKassa |
| `YOOKASA_SHOP_ID` | Ваш идентификатор магазина |
| `YOOKASA_SECRET_KEY` | Секретный ключ API |
| `YOOKASA_EMAIL` | Email аккаунта |
| `YOOKASA_URL` | Endpoint API |

## Тестовые карты

| Карта | Статус |
|------|--------|
| 4111 1111 1111 1111 | Успех |
| 4000 0000 0000 0002 | Отклонение |

**Срок действия**: Любая будущая дата  
**CVC**: Любые 3 цифры

## Устранение неполадок

### Неправильный ID магазина
- Проверьте правильность ID магазина в панели
- Проверьте опечатки
- Пересгенерируйте, если не уверены

### Платеж в ожидании
- Проверьте транзакцию в панели
- Проверьте параметры белого списка IP
- Свяжитесь с поддержкой YooKassa

### Timeout API
- Проверьте соединение Remnawave
- Убедитесь, что база данных отвечает
- Проверьте логи бота на ошибки

## Поддержка

- **Справка YooKassa**: [yookassa.ru/help](https://yookassa.ru/help)
- **API документация**: [yookassa.ru/developers/api](https://yookassa.ru/developers/api)
- **Проблемы**: Сообщайте на GitHub или свяжитесь с YooKassa
